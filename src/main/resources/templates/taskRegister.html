<!DOCTYPE html>
<!--/* Copyright (C) 2014 ASYX International B.V. All rights reserved. */-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title
	th:text="${@environment.getProperty('application_name')} + ' - ' + ${#messages.msg('label.task.title')}">Task
	Details</title>
<link rel="stylesheet" th:if="${#themes.code('name')==''}"
	th:href="@{'/css/default-master.css'}" />
<link rel="stylesheet" th:if="${#themes.code('name')!=''}"
	th:href="@{'/css/' + ${#themes.code('name')} + '-master.css'}" />
<link rel="stylesheet" th:href="@{/css/datepicker3.css}"
	href="../static/css/datepicker3.css" />
</head>
<body
	th:class="${#themes.code('skin')+(@xchange3Util.fetchCookie(#httpServletRequest.cookies, 'minifyMenu')!=null?' minified':'')}"
	th:classappend="${#authentication.principal.perspective}">
	<div th:replace="layout-dashboard :: header-panel"></div>
	<div th:replace="layout-dashboard :: left-panel"></div>
	<div id="main" role="main">
		<div th:replace="layout-dashboard :: default-ribbon"></div>

		<div id="content">
			<section>
				<h1 th:text="${#messages.msg('label.task.title')}">Task Details</h1>
				<div th:if="${alertSuccess}" class="alert alert-success fade in">
					<a href="#" class="close" data-dismiss="alert">&times;</a><span
						th:text="${alertSuccess}">Success message.</span>
				</div>
				<div th:if="${alertWarning}" class="alert alert-warning fade in">
					<a href="#" class="close" data-dismiss="alert">&times;</a><span
						th:text="${alertWarning}">Warning message.</span>
				</div>
				<form class="form" action="/task" method="POST">
					<div th:if="${errors}" class="alert alert-warning fade in">
						<ul>
							<li th:each="err : ${errors}" th:text="${err}">Input is
								incorrect</li>
						</ul>
					</div>
					<input type="hidden" th:name="${_csrf.parameterName}"
						th:value="${_csrf.token}" /> <input type="hidden"
						th:name="taskId" th:value="${task.id}" /> <input type="hidden"
						th:name="form_document" th:value="${form_document}" /><input
						type="hidden" th:name="action" th:value="'update'" />
					<table class="table">
						<thead>
							<tr>
								<th th:text="${#messages.msg('label.key')}">Key</th>
								<th th:text="${#messages.msg('label.value')}">Value</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td th:text="${#messages.msg('label.tasks.businessKey')}">Business
									Key</td>
								<td th:text="${businessKey}">task_key</td>
							</tr>
							<tr>
								<td th:text="${#messages.msg('label.tasks.name')}">Name</td>
								<td th:text="${task.name}">task_name</td>
							</tr>
							<tr>
								<td th:text="${#messages.msg('label.tasks.created')}">Created</td>
								<td><span th:if="${@xchange3Util.showRelativeTime}"
									class="timeago"
									th:title="${@documentController.getIso8601DateFormat(task.createTime)}"
									th:text="${task.createTime}"></span><span
									th:if="${!@xchange3Util.showRelativeTime}"
									th:text="${#calendars.format(task.createTime,'dd MMM yyyy HH:mm')}"></span></td>
							</tr>
							<tr>
								<td th:text="${#messages.msg('label.task.register.username')}">Username
								</td>
								<td th:text="${user.username}">username</td>
							</tr>
							<tr>
								<td
									th:text="${#messages.msg('label.task.register.emailAddress')}">email</td>
								<td th:text="${user.emailAddress}">email</td>
							</tr>
							<tr>
								<td th:text="${#messages.msg('label.tasks.action')}">Action</td>
								<td><a th:unless="${action}=='edit'"
									class="btn btn-xs btn-primary"
									th:href="${completeRedirect != null} ? @{/task/__${task.id}__/complete(redirect=${completeRedirect})} : @{/task/__${task.id}__/complete}"
									href="#"><span class="glyphicon glyphicon-check"></span> <span
										th:text="${#messages.msg('label.button.complete')}">Complete</span></a>
									<a th:unless="${action}=='edit'" th:if="${form_editable}"
									class="btn btn-xs btn-warning"
									th:href="@{/task/__${task.id}__/edit}" href="#"><span
										class="glyphicon glyphicon-edit"></span> <span
										th:text="${#messages.msg('label.button.edit')}">Edit</span></a>
									<button type="submit" th:if="${action}=='edit'"
										class="btn btn-xs btn-success" name="actionSubmit"
										value="updateRegistrationForm">
										<span class="glyphicon glyphicon-floppy-save"></span> <span
											th:text="${#messages.msg('label.button.save')}">Save</span>
									</button>
									<button type="reset" th:if="${action}=='edit'"
										class="btn btn-xs btn-danger">
										<span class="glyphicon glyphicon-floppy-remove"></span> <span
											th:text="${#messages.msg('label.button.clear')}">Clear</span>
									</button></td>
							</tr>
						</tbody>
					</table>

					<div class="panel panel-default">

						<div class="panel-body">
							<h2 th:text="${#messages.msg('label.task.register.header')}"></h2>
							<div>
								<table class="table">
									<thead>
										<tr>
											<th class="col-sm-4"><span
												th:text="${#messages.msg('label.key')}">Key</span></th>
											<th class="col-sm-6"><span
												th:text="${#messages.msg('label.value')}">Value</span></th>
										</tr>
									</thead>
									<tbody th:if="${action!='edit'}">
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.companyRegistrationNumber')}">Company
												Registration Number</td>
											<td th:text="${companyRegistrationNumber}">companyRegistrationNumber</td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.supplierCode')}">Supplier
												Code</td>
											<td th:text="${supplierCode}">supplierCode</td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.companyName')}">Company
												Name</td>
											<td
												th:text="${companyDetail != null} ? ${companyDetail.name} : ''">company
												name</td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.countryISOCode')}">Country
												ISO Code</td>
											<td
												th:text="${companyDetail != null} ? ${companyDetail.countryISOCode} : ''">countryISOCode</td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.languageISOCode')}">Language
												ISO Code</td>
											<td
												th:text="${companyDetail != null} ? ${companyDetail.languageISOCode} : ''">languageISOCode</td>
										</tr>
										<tr>
											<td th:text="${#messages.msg('label.task.register.city')}">City</td>
											<td
												th:text="${companyDetail != null} ? ${companyDetail.city} : ''">city</td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.postalCode')}">Postal
												Code</td>
											<td
												th:text="${companyDetail != null} ? ${companyDetail.postalCode} : ''">postal
												code</td>
										</tr>
										<tr>
											<td th:text="${#messages.msg('label.task.register.street1')}">Street
												1</td>
											<td
												th:text="${companyDetail != null} ? ${companyDetail.street1} : ''">street1</td>
										</tr>
										<tr>
											<td th:text="${#messages.msg('label.task.register.street2')}">Street
												2</td>
											<td
												th:text="${companyDetail != null} ? ${companyDetail.street2} : ''">street2</td>
										</tr>
										<tr>
											<td th:text="${#messages.msg('label.task.register.remark')}">Remark</td>
											<td th:text="${remark != null} ? ${remark} : ''">remark</td>
										</tr>
									</tbody>
									<tbody th:if="${action=='edit'}">
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.approval')}">Approval</td>
											<td><select name="approval" id="approval">
													<option value="accept"
														th:text="${#messages.msg('label.task.register.approval.accept')}">Accept</option>
													<option value="reject"
														th:text="${#messages.msg('label.task.register.approval.reject')}">Reject</option>
											</select></td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.companyRegistrationNumber')}">Company
												Registration Number <span style="color: red;">*</span>
											</td>
											<td><input type="text" id="companyRegistrationNumber"
												th:name="companyRegistrationNumber"
												th:value="${companyRegistrationNumber != null} ? ${companyRegistrationNumber} : ''"
												class="form-control" maxlength="15" /></td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.supplierCode')}">Supplier
												Code<span style="color: red;">*</span>
											</td>
											<td><input type="text" id="supplierCode"
												th:name="supplierCode"
												th:value="${supplierCode != null} ? ${supplierCode} : ''"
												class="form-control" /></td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.companyName')}">Company
												Name <span style="color: red;">*</span>
											</td>
											<td><input type="text" id="companyName"
												th:name="companyName"
												th:value="${companyDetail != null} ? ${companyDetail.name} : ''"
												class="form-control" /></td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.countryISOCode')}">Country
												ISO Code</td>
											<td><input type="text" id="countryISOCode"
												th:name="countryISOCode"
												th:value="${companyDetail != null} ? ${companyDetail.countryISOCode} : ''"
												class="form-control" maxlength="3" /></td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.languageISOCode')}">Language
												ISO Code</td>
											<td><input type="text" id="languageISOCode"
												th:name="languageISOCode"
												th:value="${companyDetail != null} ? ${companyDetail.languageISOCode} : ''"
												class="form-control" maxlength="3" /></td>
										</tr>
										<tr>
											<td th:text="${#messages.msg('label.task.register.city')}">City</td>
											<td><input type="text" id="city" th:name="city"
												th:value="${companyDetail != null} ? ${companyDetail.city} : ''"
												class="form-control" /></td>
										</tr>
										<tr>
											<td
												th:text="${#messages.msg('label.task.register.postalCode')}">Postal
												Code</td>
											<td><input type="text" id="postalCode"
												th:name="postalCode"
												th:value="${companyDetail != null} ? ${companyDetail.postalCode} : ''"
												class="form-control" /></td>
										</tr>
										<tr>
											<td th:text="${#messages.msg('label.task.register.street1')}">Street
												1</td>
											<td><input type="text" id="street1" th:name="street1"
												th:value="${companyDetail != null} ? ${companyDetail.street1} : ''"
												class="form-control" /></td>
										</tr>
										<tr>
											<td th:text="${#messages.msg('label.task.register.street2')}">Street
												2</td>
											<td><input type="text" id="street2" th:name="street2"
												th:value="${companyDetail != null} ? ${companyDetail.street2} : ''"
												class="form-control" /></td>
										</tr>
										<tr>
											<td th:text="${#messages.msg('label.task.register.remark')}">Remark</td>
											<td><input type="text" id="remark" th:name="remark"
												th:value="${remark != null} ? ${remark} : ''"
												class="form-control" /></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</form>
			</section>
		</div>
	</div>

	<div th:replace="layout-dashboard :: footer-panel"></div>
	<div th:replace="layout-dashboard :: shortcut-panel"></div>
	<div th:replace="base :: scripts"></div>
	<script th:inline="javascript">
		/*<![CDATA[*/
		jQuery(document)
				.ready(
						function() {
							var url = /*[[@{/task(id=${task.id},view=process_documents)}]]*/null;
							jQuery("span.timeago").timeago();
							(window.formDocumentReady || function() {
							})();
							setTimeout(function() {
								$.get(url, function(data) {
									$("#process_documents").html(data);
									jQuery("span.timeago").timeago();
								});
							}, 3000);
							setTimeout(function() {
								$(".alert").alert('close');
							}, 8000);

							var approvalValue = $('#approval option:selected')
									.val();
							function disabledField(val) {
								$('#companyRegistrationNumber').prop(
										'disabled', val);
								$('#supplierCode').prop('disabled', val);
								$('#companyName').prop('disabled', val);
								$('#countryISOCode').prop('disabled', val);
								$('#imexNumber').prop('disabled', val);
								$('#languageISOCode').prop('disabled', val);
								$('#postalCode').prop('disabled', val);
								$('#street1').prop('disabled', val);
								$('#street2').prop('disabled', val);
								$('#city').prop('disabled', val);
							}
							if (approvalValue == 'accept') {
								disabledField(false);
								$('#remark').prop('disabled', true);
							}

							$("#approval")
									.change(
											function() {
												approvalValue = $(
														'#approval option:selected')
														.val();
												if (approvalValue == 'reject') {
													disabledField(true);
													$('#remark').prop(
															'disabled', false);
												} else if (approvalValue == 'accept') {
													disabledField(false);
													$('#remark').prop(
															'disabled', true);
												}
											});

						});
		$("ul#menu-list li#tasks-list").addClass("active");
		/*]]>*/
	</script>

	<script th:replace="base :: script-google-analytics"></script>
</body>
</html>
